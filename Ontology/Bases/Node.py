# --------------------------------------------------------------------------------------------------
# ----------------------------------- Ontology :: Bases :: Node ------------------------------------
# --------------------------------------------------------------------------------------------------
from typing import Optional

from . Meta import Meta
from . Axes import Axes
from . Arcs import Arcs
from . Edge import Edge


# --------------------------------------------------------------------------------------------------
# ------------------------------------------ Base :: Node ------------------------------------------
# --------------------------------------------------------------------------------------------------
class Node(object):

    def __init__(self, meta: Meta, axes: Axes) -> None:
        super().__init__()

        self.arcs = dict()
        self.meta = meta
        self.axes = axes

    def vectorize(self) -> tuple[Axes, Arcs]:

        axes = self.axes | {

            # identity matrix
            'identity-0': False,
            'identity-1': False,
            'identity-2': False,
            'identity-3': False,
            'identity-4': False,
            'identity-5': False,
            'identity-6': False,
            'identity-7': False,
            'identity-8': False,
            'identity-9': False,
            'identity-A': False,
            'identity-B': False,
            'identity-C': False,
            'identity-D': False,
            'identity-E': False,
            'identity-F': False,
            'identity-G': False,
            'identity-H': False,
            'identity-I': False,
            'identity-J': False,
            'identity-K': False,
            'identity-L': False,
            'identity-M': False,
            'identity-N': False,
            'identity-O': False,
            'identity-P': False,
            'identity-Q': False,
            'identity-R': False,
            'identity-S': False,
            'identity-T': False,
            'identity-U': False,
            'identity-V': False,

            # zones
            'battlefield': False,
            'command-zone': False,
            'exile': False,
            'graveyard': False,
            'hand': False,
            'library': False,
            'plane': False,
            'stack': False,
            'zone': False,

            # pools
            'damage-pool': False,
            'emblem-pool': False,
            'mana-pool': False,
            'pool': False,
            'trigger-pool': False,

            # phases
            'phase': False,
            'upkeep': False,
            'untap-step': False,
            'draw-step': False,
            'first-main': False,
            'combat': False,
            'declare-attackers': False,
            'declare-blockers': False,
            'assign-first-strike': False,
            'resolve-first-strike': False,
            'assign-normal-strike': False,
            'resolve-normal-strike': False,
            'second-main': False,
            'cleanup-step': False,
            'end-step': False,
            'beginning-of': False,
            'end-of': False,
            'main-phase': False,

            # rules
            'deathtouch-rule': False,
            'enchantment-rule': False,
            'equipment-rule': False,
            'legendary-rule': False,
            'lethality-rule': False,
            'library-rule': False,
            'life-rule': False,
            'partner-rule': False,
            'planeswalker-rule': False,
            'poison-rule': False,
            'rule': False,
            'token-rule': False,
            'toughness-rule': False,

            # colors
            'color': False,
            'black': False,
            'blue': False,
            'colored': False,
            'colorless': False,
            'generic': False,
            'green': False,
            'monocolor': False,
            'multicolor': False,
            'phyrexian': False,
            'red': False,
            'two-colorless': False,
            'white': False,

            # object types
            'card': False,
            'counter': False,
            'damage': False,
            'effect': False,
            'emblem': False,
            'event': False,
            'mana': False,
            'marker': False,
            'object': False,
            'permanent': False,
            'player': False,
            'spell': False,

            # component types
            'ability': False,
            'cost': False,
            'criteria': False,

            # super types
            'supertype': False,
            'basic': False,
            'legendary': False,
            'ongoing': False,
            'snow': False,
            'world': False,

            # card types
            'type': False,
            'artifact': False,
            'creature': False,
            'enchantment': False,
            'instant': False,
            'land': False,
            'planeswalker': False,
            'sorcery': False,
            'tribal': False,
            'vehicle': False,
            'scheme': False,
            'siege': False,

            # subtypes
            'subtype': False,
            'aura': False,
            'contraption': False,
            'curse': False,
            'equipment': False,
            'fortification': False,
            'trap': False,
            'vehicle': False,
            'token': False,

            # ability types
            'activated': False,
            'at': False,
            'passive': False,
            'triggered': False,
            'when': False,
            'whenever': False,

            # lands
            'planes': False,
            'island': False,
            'swamp': False,
            'mountain': False,
            'forest': False,
            'waste': False,

            # tribes
            'tribe': False,
            'advisor': False,
            'ally': False,
            'angel': False,
            'antelope': False,
            'ape': False,
            'archer': False,
            'archon': False,
            'artificer': False,
            'assassin': False,
            'assembly-worker': False,
            'avatar': False,
            'azra': False,
            'badger': False,
            'barbarian': False,
            'bard': False,
            'basilisk': False,
            'bat': False,
            'bear': False,
            'beast': False,
            'beeble': False,
            'berserker': False,
            'bird': False,
            'blinkmoth': False,
            'boar': False,
            'bringer': False,
            'brushwagg': False,
            'camarid': False,
            'camel': False,
            'caribou': False,
            'carrier': False,
            'cat': False,
            'centaur': False,
            'cephalid': False,
            'chicken': False,
            'chimera': False,
            'citizen': False,
            'clamfolk': False,
            'cleric': False,
            'construct': False,
            'coward': False,
            'crab': False,
            'crocodile': False,
            'cyclops': False,
            'dauthi': False,
            'demon': False,
            'deserter': False,
            'devil': False,
            'dinosaur': False,
            'djinn': False,
            'dragon': False,
            'drake': False,
            'dreadnought': False,
            'drone': False,
            'druid': False,
            'dryad': False,
            'dwarf': False,
            'efreet': False,
            'egg': False,
            'elder': False,
            'eldrazi': False,
            'elemental': False,
            'elephant': False,
            'elf': False,
            'elkh': False,
            'eye': False,
            'faerie': False,
            'ferret': False,
            'fish': False,
            'flagbearer': False,
            'fox': False,
            'frog': False,
            'fungus': False,
            'gargoyle': False,
            'germ': False,
            'giant': False,
            'gnome': False,
            'goat': False,
            'goblin': False,
            'god': False,
            'golem': False,
            'gorgon': False,
            'graveborn': False,
            'gremlin': False,
            'griffin': False,
            'hag': False,
            'harpy': False,
            'hellion': False,
            'hippo': False,
            'hippogriff': False,
            'homarid': False,
            'homunculus': False,
            'horror': False,
            'horse': False,
            'hound': False,
            'human': False,
            'hydra': False,
            'hyena': False,
            'illusion': False,
            'imp': False,
            'incarnation': False,
            'insect': False,
            'jackal': False,
            'jellyfish': False,
            'juggernaut': False,
            'kavu': False,
            'kithkin': False,
            'knight': False,
            'kobold': False,
            'kor': False,
            'kraken': False,
            'lamia': False,
            'lammasu': False,
            'leech': False,
            'leviathan': False,
            'lhurgoyf': False,
            'licid': False,
            'lizard': False,
            'manticore': False,
            'masticore': False,
            'mercenary': False,
            'merfolk': False,
            'metathran': False,
            'minion': False,
            'minotaur': False,
            'mongoose': False,
            'monk': False,
            'monkey': False,
            'moonfolk': False,
            'mutant': False,
            'mystic': False,
            'naga': False,
            'narwhal': False,
            'nastie': False,
            'nephilim': False,
            'nightmare': False,
            'nightstalker': False,
            'ninja': False,
            'noble': False,
            'nomad': False,
            'noggle': False,
            'nymph': False,
            'octopus': False,
            'ogre': False,
            'ooze': False,
            'orb': False,
            'orc': False,
            'orgg': False,
            'otter': False,
            'ox': False,
            'oyster': False,
            'pegasus': False,
            'pentavite': False,
            'pest': False,
            'phelddagrif': False,
            'phoenix': False,
            'pirate': False,
            'plant': False,
            'praetor': False,
            'prism': False,
            'processor': False,
            'rabbit': False,
            'rat': False,
            'rebel': False,
            'reflection': False,
            'rhino': False,
            'rigger': False,
            'rogue': False,
            'sable': False,
            'salamander': False,
            'samurai': False,
            'sand': False,
            'saproling': False,
            'satyr': False,
            'scarecrow': False,
            'scion': False,
            'scorpion': False,
            'scout': False,
            'serf': False,
            'serpent': False,
            'servo': False,
            'shade': False,
            'shaman': False,
            'shapeshifter': False,
            'shark': False,
            'sheep': False,
            'siren': False,
            'skeleton': False,
            'slith': False,
            'sliver': False,
            'slug': False,
            'snake': False,
            'soldier': False,
            'soltari': False,
            'spawn': False,
            'specter': False,
            'spellshaper': False,
            'sphinx': False,
            'spider': False,
            'spike': False,
            'spirit': False,
            'splinter': False,
            'sponge': False,
            'squid': False,
            'squirrel': False,
            'starfish': False,
            'surrakar': False,
            'survivor': False,
            'tentacle': False,
            'thalakos': False,
            'thopter': False,
            'thrull': False,
            'treefolk': False,
            'trilobite': False,
            'triskelavite': False,
            'troll': False,
            'turtle': False,
            'unicorn': False,
            'vampire': False,
            'vedalken': False,
            'viashino': False,
            'volver': False,
            'wall': False,
            'warrior': False,
            'weird': False,
            'werewolf': False,
            'whale': False,
            'wizard': False,
            'wolf': False,
            'wolverine': False,
            'wombat': False,
            'worm': False,
            'wraith': False,
            'wurm': False,
            'yeti': False,
            'zombie': False,
            'zorra': False,

            # activated keywords
            'adapt': False,
            'aftermath': False,
            'amass': False,
            'ascend': False,
            'assembly': False,
            'bestow': False,
            'blitz': False,
            'cleave': False,
            'crew': False,
            'cycle': False,
            'dash': False,
            'disturb': False,
            'echo': False,
            'emblam': False,
            'entwine': False,
            'equip': False,
            'escape': False,
            'eternalize': False,
            'evoke': False,
            'exert': False,
            'fortify': False,
            'jump-start': False,
            'kicker': False,
            'level-up': False,
            'madness': False,
            'manifest': False,
            'mutate': False,
            'overload': False,
            'prototype': False,
            'receive': False,
            'regenerate': False,
            'reinforce': False,
            'replicate': False,
            'retrace': False,
            'scavenge': False,
            'spectable': False,
            'splice': False,
            'suspend': False,
            'transform': False,
            'unearth': False,

            # triggered keywords
            'annihilate': False,
            'cascade': False,
            'champion': False,
            'cipher': False,
            'demonstrate': False,
            'devour': False,
            'dredge': False,
            'embalm': False,
            'exploit': False,
            'extort': False,
            'fabricate': False,
            'foretell': False,
            'graft': False,
            'gravestorm': False,
            'haunt': False,
            'ingest': False,
            'prowl': False,
            'ravenous': False,
            'rebound': False,
            'recover': False,
            'riot': False,
            'soulbond': False,
            'storm': False,
            'triggered': False,
            'vanish': False,

            # static keyword abilities
            'keyword': False,
            'affinity': False,
            'banding': False,
            'bushido': False,
            'changeling': False,
            'companion': False,
            'conspire': False,
            'convoke': False,
            'cycling': False,
            'deathtouch': False,
            'defender': False,
            'delve': False,
            'double-strike': False,
            'exalted': False,
            'fear': False,
            'first-strike': False,
            'flash': False,
            'flashback': False,
            'flying': False,
            'for-mirrodin': False,
            'frenzy': False,
            'fuse': False,
            'haste': False,
            'hexproof': False,
            'hidden-agenda': False,
            'improvise': False,
            'indestructible': False,
            'infect': False,
            'intimidate': False,
            'landwalk': False,
            'lifelink': False,
            'living-weapon': False,
            'menace': False,
            'mentor': False,
            'miracle': False,
            'modular': False,
            'morph': False,
            'ninjutsu': False,
            'offering': False,
            'persist': False,
            'phasing': False,
            'protection': False,
            'provoke': False,
            'prowess': False,
            'rampage': False,
            'reach': False,
            'shadow': False,
            'shroud': False,
            'skulk': False,
            'split-second': False,
            'sunburst': False,
            'surge': False,
            'toxic': False,
            'trample': False,
            'transfigure': False,
            'transmute': False,
            'tribute': False,
            'undying': False,
            'vigilance': False,
            'ward': False,

            # combat axes
            'cards': False,
            'life': False,
            'power': False,
            'toughness': False,

            # counter types
            '+1/+1': False,
            '-1/-1': False,
            'age': False,
            'aim': False,
            'alertness': False,
            'ammo': False,
            'arrow': False,
            'awakening': False,
            'aether': False,
            'bounty': False,
            'bribery': False,
            'brick': False,
            'cage': False,
            'charge': False,
            'chorus': False,
            'coin': False,
            'corpse': False,
            'credit': False,
            'croak': False,
            'cube': False,
            'currency': False,
            'death': False,
            'depletion': False,
            'despair': False,
            'devotion': False,
            'divinity': False,
            'doom': False,
            'dream': False,
            'echo': False,
            'egg': False,
            'elixir': False,
            'energy': False,
            'eon': False,
            'experience': False,
            'eyeball': False,
            'fade': False,
            'feather': False,
            'filibuster': False,
            'finality': False,
            'flame': False,
            'flood': False,
            'fuse': False,
            'fury': False,
            'gem': False,
            'ghostform': False,
            'gold': False,
            'graft': False,
            'growth': False,
            'hatchling': False,
            'hoard': False,
            'hunger': False,
            'ice': False,
            'infection': False,
            'insect': False,
            'intervention': False,
            'isolation': False,
            'javelin': False,
            'ki': False,
            'knowledge': False,
            'level': False,
            'lifeline': False,
            'loyalty': False,
            'luck': False,
            'lure': False,
            'magnet': False,
            'mannequin': False,
            'matrix': False,
            'medal': False,
            'mimic': False,
            'mine': False,
            'mire': False,
            'music': False,
            'net': False,
            'omen': False,
            'ore': False,
            'petrification': False,
            'poison': False,
            'pollen': False,
            'pressure': False,
            'prey': False,
            'quest': False,
            'rage': False,
            'replica': False,
            'rust': False,
            'shield': False,
            'shore': False,
            'slime': False,
            'soul': False,
            'soot': False,
            'spore': False,
            'storage': False,
            'strife': False,
            'study': False,
            'task': False,
            'theft': False,
            'theorem': False,
            'time': False,
            'tower': False,
            'training': False,
            'trap': False,
            'treasure': False,
            'verse': False,
            'vitality': False,
            'volatility': False,
            'vortex': False,
            'warp': False,
            'wind': False,
            'winch': False,
            'wish': False,
            'work': False,
            'wound': False,

            # player actions
            'activate': False,
            'attach': False,
            'attack': False,
            'banish': False,
            'become': False,
            'blink': False,
            'block': False,
            'bounce': False,
            'cast': False,
            'clash': False,
            'concede': False,
            'concrete': False,
            'copy': False,
            'counteract': False,
            'deal': False,
            'destroy': False,
            'detain': False,
            'die': False,
            'discard': False,
            'double': False,
            'doubletap': False,
            'draw': False,
            'enchant': False,
            'enter': False,
            'fight': False,
            'flip': False,
            'gain': False,
            'get': False,
            'halve': False,
            'investigate': False,
            'learn': False,
            'leave': False,
            'lose': False,
            'mill': False,
            'modulate': False,
            'pay': False,
            'phase': False,
            'populate': False,
            'proliferate': False,
            'put': False,
            'remove': False,
            'reveal': False,
            'roll': False,
            'sacrifice': False,
            'scry': False,
            'search': False,
            'select': False,
            'send': False,
            'shuffle': False,
            'succond': False,
            'surveil': False,
            'tap': False,
            'target': False,
            'trigger': False,
            'unattach': False,
            'uncrew': False,
            'unenchant': False,
            'unfortify': False,
            'untap': False,
            'vote': False,
            'win': False,

            # logical actions
            'abstract': False,
            'action': False,
            'add': False,
            'and': False,
            'count': False,
            'else': False,
            'empty': False,
            'equal': False,
            'filter': False,
            'for': False,
            'forever': False,
            'group': False,
            'if': False,
            'less': False,
            'less-equal': False,
            'more': False,
            'more-equal': False,
            'nand': False,
            'non-empty': False,
            'non-zero': False,
            'nor': False,
            'not': False,
            'omit': False,
            'or': False,
            'order': False,
            'pull': False,
            'push': False,
            'query': False,
            'random': False,
            'sequence': False,
            'sub': False,
            'sum': False,
            'then': False,
            'to': False,
            'while': False,
            'xor': False,
            'zero': False,

            # status indicators
            'abomninous': False, # has-monstrouse
            'attached': False,
            'attacking': False,
            'blocked': False,
            'blocking': False,
            'cloned': False, # is a copy
            'citys-blessing': False,
            'countered': False,
            'equipped': False,
            'enchanted': False,
            'encoded': False,
            'exerted': False,
            'face-down': False,
            'face-up': False,
            'flipped': False,
            'fortified': False,
            'foretold': False,
            'manifested': False,
            'melded': False,
            'monarch': False,
            'morphed': False,
            'mutated': False,
            'partnered': False,
            'phased': False,
            'renowned': False,
            'suspended': False,
            'tapped': False,
            'transformed': False,
            'unblocked': False,
            'untapped': False,

            # restrictions
            'cannot-gain-life': False,

            # concepts
            'survive': False,
            'priority': False,
            'owner': False,
            'controller': False,

        }

        arcs = self.arcs | {

            # structural relationships
            'ability-of': False,
            'condition-on': False,
            'child-of': False,
            'condition-on': False,
            'cost-of': False,
            'parent-of': False,
            'trigger-of': False,

            # ownership and control
            'controller-of': False,
            'controlled-by': False,
            'owner-of': False,
            'owned-by': False,
            'copied-by': False,
            'copier-of': False,
            'paid-for': False,
            'paid-by': False,

            # attachment
            'attached-by': False,
            'attached-to': False,
            'crewed-by': False,
            'crew-of': False,
            'enchanted-to': False,
            'enchanted-by': False,
            'fortifier-of': False,
            'fortified-by': False,

            # transformation and state
            'transformed_from': False,
            'transformed_into': False,
            'morphed_from': False,
            'morphed_into': False,

            # interactions
            'target-by': False,
            'target-of': False,
            'source-of': False,

            # combat relationships
            'blocked-by': False,
            'blocker_of': False,

        }

        return axes, arcs

    def disconnect(self, target: 'Node') -> 'Node':
        return self.arcs.pop(str(id(target)))

    def connect(self, target: 'Node', arcs: Arcs) -> 'Edge':
        self.arcs[str(id(target))] = Edge(target, arcs)

    def compile(self, parent: 'Node') -> 'Node':
        ...